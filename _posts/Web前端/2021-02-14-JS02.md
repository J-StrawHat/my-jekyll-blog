---
title: 「JavaScript学习笔记02」BOM、DOM、事件
author: JoyDee
categories: [Web前端, JavaScript]
tags: [JS]
date: 2021-02-14 10:19:00 +0800
math: true
---

~~深圳的小梅沙真的治愈啊~~

# Chapter 2. BOM-浏览器对象模型

浏览器对象模型（**B**rowser **O**bject **M**odel），将浏览器的各个组成部分封装为对象，使得 JavaScript 有能力与浏览器“对话”。

其组成有：

+ `window`——窗口对象
+ `navigator`——浏览器对象
+ `screen`——显示器屏幕对象
+ `history`——历史记录对象
+ `location`——地址栏对象

## 2.1 window：窗口对象

window 对象，表示了浏览器窗口，所有 JS 全局对象、函数以及变量均自动成为 window 对象的成员。全局变量，是 window 对象的属性（甚至，HTML DOM 的 `document` 也是 window 对象的属性之一）；全局函数，是 window 对象的方法。

### 2.1.1 属性

1. 获取其他 BOM 对象：
   + `history`
   + `location`
   + `navigator`
   + `screen`
2. 获取 DOM 对象：
   + `document`

### 2.1.2 特点

1. window 对象无需创建，即可使用其相关的方法
2. window 引用可以省略

### 2.1.3 相关方法

（一）与弹出框有关的方法：

+ `alert()`：显示带有一段消息和一个确认按钮的警告框
+ `confirm()`：显示带有一段消息以及确认按钮（若用户点击，则返回 `true`）和取消按钮（若用户点击，则返回 `false`）的对话框。
+ `prompt()`：显示可提示用户输入的对话框，其返回为用户输入的值。

（二）与打开关闭有关的方法：

+ `close()`：关闭浏览器窗口。“谁调用我，我关闭谁”
+ `open()`：打开一个新的浏览器窗口，同时返回新的 window 对象

```html
<body>
    <input id = "openBtn" type = "button" value = "打开窗口">
    <script>
    	var openBtn = document.getElementById("openBtn");
        var newWindow;
        openBtn.onclick = function(){
            newWindow = open("https://joydee.top/");
        }
        
        var closeBtn = document.getElementById("closeBtn");
        closeBtn.onclick = function(){
            newWindow.close(); //关闭刚打开的窗口
        }
    </script>
</body>
```

（三）与定时器有关的方法

+ `setTimeout(JS代码或方法对象, 毫秒值)`：在指定的毫秒数后调用函数或计算表达式（**只会执行一次**），它返回的是一个唯一标识，用于取消定时器。
+ `clearTimeout()`：取消由 `setTimeout()` 方法设置的 `timeout`
+ `setInterval()`：按照指定的周期（以毫秒为单位）来调用传入的函数或计算表达式。
+ `clearInterval()`：取消由 `setInterval()` 设置的 `timeout`

```html
<body>
    <input id = "openBtn" type = "button" value = "打开窗口">
    <script>
    	var id = setTimeout("fun();", 3000); //3s后，弹出该窗口
        // 或者直接传入方法对象：setTimeout(fun, 3000);
        // 关闭计时：clearTimeout(id); 
        function fun(){
            alert('boom~~~');
        }
    </script>
</body>
```

## 2.2 location：地址栏对象

（一）创建（获取）：

+ 直接 `window.location` 或者不使用window的前缀： `location`

（二）属性：

+ `href`：设置或返回完整的 URL 

（三）方法：

+ `reload()`：重新加载当前文档，即刷新

## 2.3 history：历史记录对象

（一）创建（获取）：

+ 直接 `window.history` 或者不使用window的前缀： `history`

（二）属性：

+ `length`：返回当前窗口历史列表中的 URL 数量

（三）方法：

+ `back()`：加载 `history` 列表中的前一个 URL。

+ `forward()`：加载 `history` 列表中的下一个 URL。

+ `go(参数)`：加载 `history` 列表中的某个具体页面。其参数：
   
   + 正数：前进几个历史记录
   
   + 负数：后退几个历史记录

# Chapter 3. DOM-文档对象模型

网页被加载时，浏览器会创建页面的文档对象模型（**D**ocument **O**bject **M**odel），即将标记语言文档的各个组成部分，封装为对象。

W3C DOM 标准被分为 三个部分：

+ 核心 DOM：针对任何结构化文档的标准模型
  + `Document`：文档对象
  + `Element`：元素对象
  + `Attribute`：属性对象
  + `Text`：文本对象
  + `Comment`：注释对象
  + `Node`：节点对象，其他五个的父对象
+ XML DOM：针对 XML 文档的标准模型
+ HTML DOM：针对 HTML 文档的标准模型

## 3.1 核心 DOM 模型

### 3.1.1 Document：文档对象

（一）在 HTML DOM 模型中，可以使用 window 对象来获取：`window.document`，也可省略前缀：`document`

（二）方法：

1. 获取 `Element` 对象：
   + `getElementById()`：根据 `id` 属性值（一般唯一）来获取元素对象
   + `getElementsByTagName`：根据元素名称获取元素对象**们**（注意方法名中的 `s`），返回值是一个数组。
   + `getElementsByClassName()`：根据 `class` 属性获取元素对象们，返回值是一个数组
   + `getElementByName()`：根据 `name` 属性值获取元素对象们，返回值也是一个数组
2. 创建其他 DOM 对象：
   + `createAttribute(name)`
   + `createComment()`
   + `createElement()`
   + `createTextNode()`

### 3.1.2 Element 元素对象

（一）方法：

+ `removeAttribute()`：删除属性
+ `setAttribute()`：设置属性

### 3.1.3 Node 节点对象

（一）特点：所有DOM对象都可被认为是一个节点

（二）属性：`parentNode`：返回节点的父节点

（三）方法：CRUD DOM树：

+ `appendChild()`：向节点的子节点列表的结尾添加子节点
+ `removeChild()`：删除（并返回）当前节点的指定子节点
+ `replaceChild()`：用新节点替换一个子节点。

## 3.2 HTML DOM



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>轮播图</title>
    <script>
        var cnt = 1;
        function fun() {
            cnt = cnt % 4 + 1;
            var img = document.getElementById("myimg"); //获取id为myimd的对象
            img.src = "./imgs/" + cnt + ".svg";
        }
        setInterval(fun, 2000);
    </script>
</head>
<body>
    <img id = "myimg" src = "./imgs/1.svg" width="50%">
</body>
</html>
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自动跳转</title>
</head>
<body>
    <p>
        <span id = "curtime" style="color: dodgerblue">5</span>秒后，自动跳转到首页...
    </p>
    <script>
        var ss = 5, id;
        function showTime() {
            ss--;
            if(ss <= 0){
                //clearInterval(id);
                location.href = "https://joydee.top";
            }
            var curtime = document.getElementById("curtime");
            curtime.innerHTML = ss + "";  //使ss自动转为字符串类型
        }
        id = setInterval(showTime, 1000);
    </script>
</body>
</html>
```

